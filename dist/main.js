!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("path")},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("electron-updater")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("electron-pdf-window")},function(e){e.exports=JSON.parse('{"name":"guanjia","version":"0.1.0","description":"金财互联数据服务有限公司 粤ICP备14007298号","author":"金财互联数据服务有限公司","main":"dist/main.js","scripts":{"start":"node_modules/.bin/electron . --inspect=5858","lint":"eslint --ext .js,.vue src","dev":"node build/webpack.dev.conf.js","postinstall":"electron-builder install-app-deps","dev:main":"webpack --config build/main/webpack.dev.conf.js","dev:preload":"webpack --config build/preload/webpack.dev.conf.js","dev:renderer":"webpack-dev-server --config build/renderer/webpack.dev.conf.js","build":"webpack --config build/webpack.prod.conf.js","build:main":"webpack --config build/main/webpack.prod.conf.js","build:preload":"webpack --config build/preload/webpack.prod.conf.js","build:renderer":"webpack --config build/renderer/webpack.prod.conf.js","pack":"electron-builder","release":"electron-builder"},"keywords":["linux","macOS","Windows"],"dependencies":{"@babel/runtime":"^7.7.7","axios":"^0.19.0","electron-log":"^4.2.4","electron-pdf-window":"^1.0.12","electron-screenshots":"^0.0.5","electron-updater":"^4.2.0","element-ui":"^2.13.2","lodash":"^4.17.19","normalize.css":"^8.0.1","nprogress":"^0.2.0","vue":"^2.6.11"},"devDependencies":{"@babel/core":"^7.7.7","@babel/plugin-proposal-class-properties":"^7.7.4","@babel/plugin-proposal-export-default-from":"^7.7.4","@babel/plugin-transform-runtime":"^7.7.6","@babel/preset-env":"^7.7.7","autoprefixer":"^9.7.3","babel-eslint":"^10.0.3","babel-loader":"^8.0.6","chalk":"^3.0.0","css-loader":"^3.4.1","electron":"^6.1.7","electron-builder":"^22.3.5","electron-debug":"^3.1.0","electron-dev-webpack-plugin":"^1.0.4","electron-devtools-installer":"^2.2.4","eslint":"^6.8.0","eslint-config-standard":"^14.1.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^3.0.3","eslint-plugin-import":"^2.19.1","eslint-plugin-node":"^11.0.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","eslint-plugin-vue":"^6.1.2","file-loader":"^5.0.2","friendly-errors-webpack-plugin":"^1.7.0","html-webpack-plugin":"^3.2.0","less":"^3.10.3","less-loader":"^5.0.0","mini-css-extract-plugin":"^0.9.0","postcss-loader":"^3.0.0","pug":"^2.0.4","pug-plain-loader":"^1.0.0","registry-auth-token":"^4.0.0","registry-url":"^5.1.0","url-loader":"^3.0.0","vue-loader":"^15.8.3","vue-template-compiler":"^2.6.11","webpack":"^4.41.5","webpack-cli":"^3.3.10","webpack-dev-server":"^3.10.1","webpack-merge":"^4.2.2"},"build":{"appId":"com.electron.jcgj","productName":"金财管家","artifactName":"guanjia-${version}-${channel}-${arch}.${ext}","copyright":"Copyright © 金财管家2020","asar":true,"directories":{"buildResources":"resources/icons","output":"release"},"files":["dist/**/*","resources/tray/*","resources/logo.png"],"publish":{"provider":"generic","owner":"jeffycai","repo":"jcgj","url":""},"dmg":{"contents":[{"x":410,"y":150,"type":"link","path":"/Applications"},{"x":130,"y":150,"type":"file"}]},"mac":{"target":["dmg","zip"],"icon":"./resources/icons/icon.icns","category":"public.app-category.instant-messaging","artifactName":"${productName}_setup_${version}.${ext}"},"win":{"icon":"./resources/icons/icon.ico","target":[{"target":"nsis","arch":["x64","ia32"]}]},"linux":{"target":[{"target":"AppImage","arch":["x64","ia32","arm64","armv7l"]},{"target":"deb","arch":["x64","ia32","arm64","armv7l"]},{"target":"rpm","arch":["x64","ia32","arm64","armv7l"]}],"executableName":"jcgj","icon":"./resources/icons","category":"InstantMessaging;Network"},"nsis":{"oneClick":false,"perMachine":true,"allowToChangeInstallationDirectory":true,"displayLanguageSelector":false,"language":2052,"include":"build/installer.nsh"}},"license":"MIT","repository":{"type":"git","url":"git+https://github.com/jeffycai/jcgj.git"},"bugs":{"url":"https://github.com/jeffycai/jcgj/issues"},"homepage":"https://erp.jchl.com/#/edfx-app-root/edfx-app-agreement"}')},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("electron-screenshots")},function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),s=n(0),a=n(1),r=n.n(a),l=n(3),c=n.n(l);var d=r.a.join(s.app.getAppPath(),"./resources/logo.png");var p=n(8),u=n.n(p);class h extends u.a{constructor(...e){super(...e),o()(this,"$notify",null)}show(e){this.close(),this.$notify=new s.Notification({title:"客户端",body:e,icon:d}),this.$notify.on("click",()=>{this.close(),this.emit("click")}),this.$notify.show()}close(){this.$notify&&(this.$notify.close(),this.$notify=null)}}var w=n(5),g=n.n(w);const f="darwin"===process.platform;var m=(e,t)=>{const n={copy:{id:1,label:"复制"},cut:{id:2,label:"剪切"},paste:{id:3,label:"粘贴"},selectall:{id:4,label:"全选"}},{selectionText:i,isEditable:o,editFlags:a}=t,r=Object.keys(n).map(e=>{const{id:t,label:s}=n[e];let r=!1,l=!1;const{canCopy:c,canCut:d,canPaste:p,canSelectAll:u}=a;switch(e){case"copy":l=!!i,r=c;break;case"cut":l=!!o,r=l&&!!i&&d;break;case"paste":l=!!o,r=l&&p;break;case"selectall":l=!!o,r=l&&u}return{id:t,label:s,role:e,enabled:r,visible:l}}).filter(e=>e.visible).sort((e,t)=>e.id>t.id);if(r.length&&!e.isDestroyed()){s.Menu.buildFromTemplate(r).popup(e)}},b=n(6),y=n.n(b);const W=n(7),$=n(4).autoUpdater;let k,v=Date.now();const M="darwin"===process.platform;function C(e){"about:blank"!==e&&"http://test.aierp.cn:8089/#/edfx-app-root/ttk-zs-app-login"!==e&&0!==e.indexOf("http://test.aierp.cn:8089/vendor/download")&&0!==e.indexOf("http://test.aierp.cn:8089/vendor/attachment")&&(k===e&&Date.now()-v<800||(k=e,v=Date.now(),s.shell.openExternal(e)))}var x=e=>()=>{if(e.$mainWin)return void e.showMainWin();const t=new s.BrowserWindow({title:"金财管家",width:630,height:380,minWidth:630,minHeight:380,useContentSize:!0,center:!0,frame:!1,show:!1,backgroundColor:"#0066b3",icon:d,resizable:!0,webPreferences:{nodeIntegration:!0}});t.maximize(),t.webContents.on("did-finish-load",()=>{t.webContents.send("staticData",{version:W.version})}),function(e){function t(t){e.webContents.send("updateMessage",t)}$.setFeedURL("https://ttk-prod-client-update.oss-cn-beijing.aliyuncs.com/download/");$.on("error",e=>{t({action:"error",errorInfo:e})}),$.on("checking-for-update",()=>{t({action:"checking"})}),$.autoDownload=!1,$.on("update-available",e=>{t({action:"updateAva",updateInfo:e})}),$.on("update-not-available",e=>{t({action:"updateNotAva",updateInfo:e})}),$.on("download-progress",e=>{t({action:"download-progress",updateInfo:e})}),$.on("update-downloaded",e=>{t({action:"downloadProgress",updateInfo:e}),s.ipcMain.on("isUpdateNow",(e,t)=>{$.quitAndInstall()})}),s.ipcMain.on("downloadUpdate",()=>{$.downloadUpdate()}),s.ipcMain.on("checkForUpdate",()=>{$.checkForUpdates()})}(t),t.once("ready-to-show",()=>{t.show(),t.focus()}),t.webContents.on("dom-ready",()=>{e.$tray&&e.$tray.flicker(!1);const n=r.a.join(s.app.getAppPath(),"./dist/preload/mainWin.js");c.a.access(n,c.a.constants.R_OK,e=>{e||c.a.readFile(n,(e,n)=>{e||t.webContents.isDestroyed()||t.webContents.executeJavaScript(n.toString(),()=>{t.webContents.isDestroyed()||t.webContents.send("dom-ready")})})})}),t.webContents.on("context-menu",(e,n)=>{e.preventDefault(),m(t,n)}),t.webContents.on("new-window",(e,t)=>{e.preventDefault(),C(t)}),t.webContents.on("will-navigate",(e,t)=>{e.preventDefault(),C(t)}),s.app.on("activate",()=>{t.show(),t.focus()}),s.ipcMain.on("MAINWIN:window-minimize",()=>t.minimize()),s.ipcMain.on("MAINWIN:window-maximization",()=>{t.isMaximized()?t.unmaximize():t.maximize()}),s.ipcMain.on("MAINWIN:window-close",()=>{M?s.dialog.showMessageBox({type:"info",title:"关闭提示",message:"点击确定将退出此程序",buttons:["确定","取消"],icon:d,cancelId:2},(function(e){0==e&&s.app.quit()})):e.showCloseWin()}),s.ipcMain.on("MAINWIN:open-email",(t,n)=>e.showEmailWin(n)),s.ipcMain.on("MAINWIN:window-show",()=>{t.show(),t.focus()}),s.ipcMain.on("MAINWIN:badge",(t,n)=>{s.app.setBadgeCount(n),e.$tray&&e.$tray.flicker(!!n),s.app.dock&&(s.app.dock.show(),s.app.dock.bounce("critical"))}),s.ipcMain.on("icpRender-pdfLoad",(function(e,n){const i=new s.BrowserWindow({title:"",width:600,height:400,parent:t});i.loadURL(n);const o=new y.a({width:600,height:400,title:"文件正在加载..."});return t.showPdf=function(e){i.hide(),o.loadURL(e),o.maximize(),t.showPdf=null},i})),s.ipcMain.on("icpRender-pdfPrint",(function(e,n){const i=new y.a({width:600,height:400,title:"文件正在加载..."});i.loadURL(n),t.showPdf=function(e){i.loadURL(e),i.maximize(),t.showPdf=null}})),s.ipcMain.on("icpRender-message",(function(e,n){"icpRender-message"===n&&t.maximize()})),s.ipcMain.on("icpRender-newWin",(function(e,n){const i=new s.BrowserWindow({title:"",width:600,height:400,parent:t});return i.maximize(),i.loadURL(n),i})),s.ipcMain.on("icpRender-download",(function(e,n){t.webContents.downloadURL(n)})),(e=>{e.webContents.session.on("will-download",(t,n,i)=>{const o=e.showPdf&&e.showPdf.constructor===Function;let s,a=g.a.tmpdir();if(f&&(a=g.a.tmpDir()),console.log(a),o){s=`${a}/${n.getFilename()}`,n.setSavePath(s);c.a.exists(s,e=>{e&&c.a.unlinkSync(s)})}n.on("updated",(e,t)=>{"interrupted"===t?console.log("Download is interrupted but can be resumed"):"progressing"===t&&(n.isPaused()?console.log("Download is paused"):console.log("Received bytes: "+n.getReceivedBytes()))}),n.once("done",(t,n)=>{"completed"===n?(console.log("Download successfully"),o&&s&&e.showPdf(s),e.webContents.send("downstate",n)):(console.log("Download failed: "+n),e.webContents.send("downstate",n))})})})(t),console.log("env:","production");const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/index.html");return t.loadURL(n),t};const j=n(7),I=n(4).autoUpdater;var P=e=>()=>{if(e.$updateWin)return e.$updateWin.show(),e.$updateWin.focus(),e.$updateWin;const t=new s.BrowserWindow({title:"升级",width:630,height:398,useContentSize:!0,resizable:!1,menu:!1,frame:!1,parent:e.$mainWin,modal:"darwin"!==process.platform,show:!1,icon:d,webPreferences:{nodeIntegration:!0}});t.on("ready-to-show",()=>{t.show(),t.focus()}),t.on("closed",()=>{e.$updateWin=null}),t.webContents.on("dom-ready",()=>{t.webContents.isDestroyed()||t.webContents.send("dom-ready")}),t.webContents.on("did-finish-load",()=>{t.webContents.send("staticData",{version:j.version})}),function(e){function t(t){e.webContents.send("updateMessage",t)}I.setFeedURL("https://ttk-prod-client-update.oss-cn-beijing.aliyuncs.com/download/");I.on("error",e=>{t({action:"error",errorInfo:e})}),I.on("checking-for-update",()=>{t({action:"checking"})}),I.autoDownload=!1,I.on("update-available",e=>{t({action:"updateAva",updateInfo:e})}),I.on("update-not-available",e=>{t({action:"updateNotAva",updateInfo:e})}),I.on("download-progress",e=>{t({action:"download-progress",updateInfo:e})}),I.on("update-downloaded",e=>{t({action:"downloadProgress",updateInfo:e}),s.ipcMain.on("isUpdateNow",(e,t)=>{I.quitAndInstall()})}),s.ipcMain.on("checkForUpdate",()=>{I.checkForUpdates()}),s.ipcMain.on("downloadUpdate",()=>{I.downloadUpdate()}),s.ipcMain.on("window-close",()=>{e.hide()})}(t),t.webContents.on("context-menu",(e,n)=>{e.preventDefault(),m(t,n)}),s.ipcMain.on("main-window-onlaod",(e,t)=>{e.sender.send("main-window-hidden","hidden")});const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/updateWin.html");return t.loadURL(n),t};var S=n(4);class D{constructor({ttkclient:e}){o()(this,"_ttkclient",null),o()(this,"_flickerTimer",null),o()(this,"$tray",null),o()(this,"messageTrayIcon","darwin"===process.platform?r.a.join(s.app.getAppPath(),"./resources/tray/n-16x16.png"):"win32"===process.platform||s.screen.getPrimaryDisplay().scaleFactor>1?r.a.join(s.app.getAppPath(),"./resources/tray/n-64x64.png"):r.a.join(s.app.getAppPath(),"./resources/tray/n-20x20.png")),o()(this,"noMessageTrayIcon","darwin"===process.platform?r.a.join(s.app.getAppPath(),"./resources/tray/16x16.png"):"win32"===process.platform||s.screen.getPrimaryDisplay().scaleFactor>1?r.a.join(s.app.getAppPath(),"./resources/tray/64x64.png"):r.a.join(s.app.getAppPath(),"./resources/tray/20x20.png")),this._ttkclient=e,this.$tray=new s.Tray(this.noMessageTrayIcon),this.$tray.setToolTip("金财管家"),this.initEvent(),this.setMenu()}initEvent(){this.$tray.on("click",()=>this._ttkclient.showMainWin()),this.$tray.on("double-click",()=>this._ttkclient.showMainWin())}setMenu(){const e=[{label:"显示窗口",click:()=>this._ttkclient.showMainWin()},{label:"升级",click:()=>this._ttkclient.showUpdateWin()},{label:"关于金财管家",click:()=>this._ttkclient.showAboutWin()},{label:"退出程序",click:()=>this._ttkclient.quit()}];this._ttkclient.setting.enableCapture,this.$tray.setContextMenu(s.Menu.buildFromTemplate(e))}flicker(e){const{enableFlicker:t}=this._ttkclient.setting;if(e){let e=this.messageTrayIcon;if(t){if(null!==this._flickerTimer)return;this._flickerTimer=setInterval(()=>{this.$tray.setImage(e),e=e===this.messageTrayIcon?this.noMessageTrayIcon:this.messageTrayIcon},1e3)}else this.$tray.setImage(e)}else clearInterval(this._flickerTimer),this._flickerTimer=null,this.$tray.setImage(this.noMessageTrayIcon)}isDestroyed(){return this.$tray.isDestroyed()}destroy(){return this.$tray.destroy()}}var A=n(9),N=n.n(A);new class{constructor(){if(o()(this,"_ready",null),o()(this,"$tray",null),o()(this,"$mainWin",null),o()(this,"$emailWin",null),o()(this,"$errorWin",null),o()(this,"$settingWin",null),o()(this,"$aboutWin",null),o()(this,"$updateWin",null),o()(this,"$closeWin",null),o()(this,"$screenshots",null),o()(this,"online",null),o()(this,"setting",{autoupdate:!0,enableCapture:!0,enableFlicker:!0,keymap:{"screenshots-capture":["Control","Alt","A"]}}),!s.app.requestSingleInstanceLock())return s.app.quit();this.init().then(()=>{s.app.setAppUserModelId("com.electron.ttkclient"),s.Menu.setApplicationMenu(null),this.initMainWin(),this.initTray(),this.initScreenshots(),this.initNotify(),this.bindShortcut()})}async init(){var e;return(e=this,()=>{s.ipcMain.on("online",(t,n)=>{!1===n?null===e.online&&e.showErrorWin():e.hideErrorWin(),e.online=n})})(),this.setting=await(e=>()=>{const t=r.a.join(s.app.getPath("userData"),"setting.json");return new Promise((n,i)=>{c.a.access(t,c.a.constants.R_OK|c.a.constants.W_OK,async t=>{if(t)return"ENOENT"===t.code?n(await e.writeSetting()):i(t);n(await e.readSetting())})})})(this)(),s.app.on("second-instance",(e,t,n)=>this.showMainWin()),s.app.once("window-all-closed",()=>{"darwin"!==process.platform&&(this.$tray&&!this.$tray.isDestroyed()&&(this.$tray.destroy(),this.$tray=null),s.app.quit())}),s.app.whenReady()}initMainWin(){this.$mainWin=x(this)()}initTray(){this.$tray=new D({ttkclient:this})}initScreenshots(){this.$screenshots=new N.a}initNotify(){console.log("initNotify"),this.$notify=new h,s.ipcMain.on("notify",(e,t)=>this.$notify.show(t)),this.$notify.on("click",()=>this.showMainWin())}readSetting(){return(e=this,()=>{const t=r.a.join(s.app.getPath("userData"),"setting.json");return new Promise((n,i)=>{c.a.readFile(t,(t,o)=>{if(t)return i(t);try{const t=JSON.parse(o);"string"==typeof t.keymap["screenshots-capture"]&&(t.keymap["screenshots-capture"]=t.keymap["screenshots-capture"].split("+")),n({...e.setting,...t})}catch(t){n(e.setting)}})})})();var e}writeSetting(){return(e=this,()=>{const t=r.a.join(s.app.getPath("userData"),"setting.json");return new Promise((n,i)=>{c.a.writeFile(t,JSON.stringify(e.setting,null,2),t=>{if(t)return i(t);n(e.setting)})})})();var e}quit(){s.BrowserWindow.getAllWindows().forEach(e=>e.destroy()),"darwin"!==process.platform&&(this.$tray&&!this.$tray.isDestroyed()&&(this.$tray.destroy(),this.$tray=null),s.app.quit())}bindShortcut(){var e;(e=this,()=>{const t={"screenshots-capture":()=>e.screenshotsCapture()},n=e.setting.keymap;e.setting.enableCapture||delete t["screenshots-capture"],s.globalShortcut.unregisterAll(),Object.keys(t).forEach(e=>{n[e]&&n[e].length&&s.globalShortcut.register(n[e].join("+"),t[e])})})()}showMainWin(){this.$mainWin&&(this.online?(this.$mainWin.isMinimized()&&this.$mainWin.restore(),this.$mainWin.show(),this.$mainWin.focus()):!1===this.online&&this.showErrorWin())}screenshotsCapture(){this.$screenshots&&this.$screenshots.startCapture()}showEmailWin(e){var t;this.$emailWin=(t=this,e=>{if(t.$emailWin)return t.$emailWin.show(),t.$emailWin.focus(),t.$emailWin;if(!e)return;const n=new s.BrowserWindow({title:"mail",width:980,height:640,minWidth:720,minHeight:450,useContentSize:!0,resizable:!0,menu:!1,show:!1,icon:d,webPreferences:{nodeIntegration:!0}});return n.on("ready-to-show",()=>{n.show(),n.focus()}),n.on("closed",()=>{t.$emailWin=null}),n.webContents.on("dom-ready",()=>{t.$mainWin.webContents.session.cookies.get({domain:".ttkclient.com"},(e,t)=>{e||t.forEach(e=>{".ttkclient.com"===e.domain&&n.webContents.session.cookies.set({...e,url:"https://mail.ttkclient.com"},e=>{console.log("ttkclient emailWin cookies log:",e)})})});const e=r.a.join(s.app.getAppPath(),"./dist/preload/emailWin.js");c.a.access(e,c.a.constants.R_OK,t=>{t||c.a.readFile(e,(e,t)=>{e||n.webContents.isDestroyed()||n.webContents.executeJavaScript(t.toString()).then(()=>{n.webContents.isDestroyed()||n.webContents.send("dom-ready")})})})}),n.webContents.on("context-menu",(e,t)=>{e.preventDefault(),m(n,t)}),n.loadURL(e),n})(e)}showErrorWin(){var e;this.$errorWin=(e=this,()=>{if(e.$errorWin)return e.$errorWin.show(),e.$errorWin.focus(),e.$errorWin;const t=new s.BrowserWindow({title:"网络错误",width:600,height:320,useContentSize:!0,resizable:!1,center:!0,frame:!1,menu:!1,transparent:!0,show:!1,closable:!1,skipTaskbar:!0,icon:d,webPreferences:{nodeIntegration:!0}});t.on("ready-to-show",()=>{t.show(),t.focus()}),t.on("closed",()=>{e.$errorWin=null}),s.ipcMain.on("ERRORWIN:retry",()=>{e.hideErrorWin(),e.$mainWin&&(e.$mainWin.reload(),e.showMainWin())}),s.ipcMain.on("ERRORWIN:close",()=>{e.hideErrorWin()});const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/errorWin.html");return t.loadURL(n),t})()}hideErrorWin(){this.$errorWin&&this.$errorWin.close()}showSettingWin(){var e;this.$settingWin=(e=this,()=>{if(e.$settingWin)return e.$settingWin.show(),e.$settingWin.focus(),e.$settingWin;const t=new s.BrowserWindow({title:"设置",width:320,height:330,useContentSize:!0,resizable:!1,menu:!1,parent:e.$mainWin,modal:"darwin"!==process.platform,show:!1,icon:d,webPreferences:{nodeIntegration:!0}});t.on("ready-to-show",()=>{t.show(),t.focus()}),t.on("closed",()=>{e.$settingWin=null}),t.webContents.on("dom-ready",()=>{t.webContents.send("dom-ready",e.setting)}),t.webContents.on("context-menu",(e,n)=>{e.preventDefault(),m(t,n)}),s.ipcMain.on("SETTINGWIN:setting",async(t,n)=>{e.setting=n,await e.writeSetting(),e.bindShortcut(),e.resetTrayMenu(),e.setting.autoupdate&&S.autoUpdater.checkForUpdates(),e.hideSettingWin()}),s.ipcMain.on("main-window-onlaod",(e,t)=>{e.sender.send("main-window-hidden","hidden")});const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/settingWin.html");return t.loadURL(n),t})()}hideSettingWin(){this.$settingWin&&this.$settingWin.close()}resetTrayMenu(){this.$tray&&!this.$tray.isDestroyed()&&this.$tray.setMenu()}showAboutWin(){var e;this.$aboutWin=(e=this,()=>{if(e.$aboutWin)return e.$aboutWin.show(),e.$aboutWin.focus(),e.$aboutWin;const t=new s.BrowserWindow({title:"金财管家",width:320,height:400,useContentSize:!0,resizable:!1,menu:!1,parent:e.$mainWin,modal:"darwin"!==process.platform,show:!1,icon:d,webPreferences:{nodeIntegration:!0}});t.on("ready-to-show",()=>{t.show(),t.focus()}),t.on("closed",()=>{e.$aboutWin=null}),t.webContents.on("dom-ready",()=>{t.webContents.isDestroyed()||t.webContents.send("dom-ready")}),t.webContents.on("context-menu",(e,n)=>{e.preventDefault(),m(t,n)}),s.ipcMain.on("main-window-onlaod",(e,t)=>{e.sender.send("main-window-hidden","hidden")});const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/aboutWin.html");return t.loadURL(n),t})()}showUpdateWin(){this.$updateWin=P(this)()}showCloseWin(){var e;this.$closeWin=(e=this,()=>{if(e.$closeWin)return e.$closeWin.show(),e.$closeWin.focus(),e.$closeWin;const t=new s.BrowserWindow({title:"",width:380,height:120,useContentSize:!0,resizable:!1,menu:!1,parent:e.$mainWin,modal:"darwin"!==process.platform,show:!1,icon:d,webPreferences:{nodeIntegration:!0}});t.on("ready-to-show",()=>{t.show(),t.focus()}),t.on("closed",()=>{e.$closeWin=null}),t.webContents.on("dom-ready",()=>{t.webContents.isDestroyed()||t.webContents.send("dom-ready")}),s.ipcMain.on("CLOSEWIN:close",(n,i)=>{"self"==i?t.hide():"all"==i&&e.quit()});const n="file://"+r.a.join(s.app.getAppPath(),"./dist/renderer/closeWin.html");return t.loadURL(n),t})()}}}]);
//# sourceMappingURL=main.js.map